---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout title="/home/ram1337/" description="информационный мусор.">
  <section>
    <p
      class="text-xs font-semibold uppercase tracking-[0.25em] text-slate-500 dark:text-slate-400"
    >
      /home/ram1337/
    </p>
  </section>

  <section style="margin-top: 2rem;">
    <h2>Последние заметки</h2>
    {
      posts.length === 0 ? (
        <p>Пока записей нет. Но это, надеюсь, временно.</p>
      ) : (
        posts.map((post) => <PostCard post={post} />)
      )
    }
  </section>
</BaseLayout>
